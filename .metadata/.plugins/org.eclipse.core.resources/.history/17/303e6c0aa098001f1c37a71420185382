#include <board_specific_params.h>
#include "main.h"

board_param_t* get_params() {

	static board_param_t hvbps_parameters[2] = {
		{
			.ID = STATUS_LED,
			.ival = 0,
			.type = TO_RECEIVE,
			.to_send = false,
			.timestamp = 0
		},
		{
			.ID = ALIVE,
			.ival = 0,
			.type = TO_SEND,
			.to_send = false,
			.timestamp = 0,
			.check_stale = false
		}

	};

	return hvbps_parameters;

};

static void impl_param_handler(board_param_t* param) {
	switch (param->ID) {
	case STATUS_LED:
		HAL_GPIO_WritePin(LED_BOARD_GPIO_Port, LED_BOARD_Pin, param->bval);
	break;
	case ALIVE:
		// no-op
	break;
	}
}

void can_handler(board_param_t* param) {
	for (int i = 0; i < NUM_PARAMS; i++) {
		impl_param_handler(&param[i]);
	}
}
